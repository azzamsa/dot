#!/usr/bin/env rust-script
//! Simple Fetch (sfetch)
//!
//! I tend to use it to copy and paste my sistem information for bug reporting.
//!
//! Usage:
//! Just run it as normal executable file:
//!
//! ```shell
//! ./sfetch
//! ```
//!
//! Example output:
//! ❯ ./sfetch
//! OS: Fedora Linux 36 (Workstation Edition) x86_64
//! Kernel: 5.19.11-200.fc36.x86_64
//! Shell: zsh 5.8.1
//! DE: GNOME 42.5
//! WM: Mutter
//! Emacs version: GNU Emacs 28.1 (build 1, x86_64-redhat-linux-gnu, GTK+ Version 3.24.34, cairo version 1.17.6) of 2022-07-15
//!
//! ```cargo
//! [dependencies]
//! xshell = "0.2.2"
//! anyhow = "1.0.65"
//! ```
use xshell::{cmd, Shell};

fn main() -> anyhow::Result<()> {
    let sh = Shell::new()?;

    cmd!(sh, "neofetch --off --disable title model uptime packages resolution cpu gpu memory theme icons term wm_theme cols").run()?;

    let mut emacs_version = cmd!(sh, "emacs --quick --batch --eval ' (print (version))'").read()?;
    emacs_version = emacs_version.replace('\n', "");
    emacs_version = emacs_version.replace('"', "");
    println!("Emacs version: {}", emacs_version);

    Ok(())
}
