#!/usr/bin/env rust-script
//! Names
//!
//! Sometimes I need random "real" name for demos.
//!
//! Usage:
//!
//! Just run it as normal executable file:
//!
//! ```shell
//! $ ./names
//! galileo
//! ```
//!
//! ```cargo
//! [dependencies]
//! rand = "0.8"
//! xflags = "0.3"
//! ```
use rand::Rng;

// List of muslim figure
//
// Sources:
// - [1001 Inventions and the Library of Secrets](https://www.youtube.com/watch?v=JZDe9DCx7Wk)
//
// Other sources to look:
// - https://en.wikipedia.org/wiki/List_of_scientists_in_medieval_Islamic_world
// - https://en.wikipedia.org/wiki/List_of_Islamic_scholars_described_as_father_or_founder_of_a_field
// - https://en.wikipedia.org/wiki/List_of_Sahabah
// - https://en.wikipedia.org/wiki/Mathematics_in_the_medieval_Islamic_world#Other_major_figures
// - https://en.wikipedia.org/wiki/List_of_Muslim_philosophers
// - https://en.wikipedia.org/wiki/List_of_Muslim_historians
// - https://en.wikipedia.org/wiki/List_of_female_Islamic_scholars
const MUSLIMS: [&str; 2] = [
    // Fahreddin Pasha defends the medina in 1916. [This man ate grasshoppers to save Madinah - YouTube](https://www.youtube.com/watch?v=S326ws1FXVs)
    "fahreddin",
    // Astronomers and astrologers
    "ulugh",
];

// List of random scholars
//
// Sources
// - https://github.com/moby/moby/blob/master/pkg/namesgenerator/names-generator.go
const NAMES: [&str; 2] = [
    // Richard Feynman was a key contributor to quantum mechanics and particle physics. https:#en.wikipedia.org/wiki/Richard_Feynman
    "feynman",
    // Srinivasa Ramanujan - Indian mathematician and autodidact who made extraordinary contributions to mathematical analysis, number theory, infinite series, and continued fractions. - https:#en.wikipedia.org/wiki/Srinivasa_Ramanujan
    "ramanujan",
];

enum Source {
    Muslim,
    Other,
}

fn get_random_number(length: usize) -> usize {
    let mut rng = rand::thread_rng();
    rng.gen_range(0..length)
}

fn get_random_name(source: Source) -> String {
    match source {
        Source::Muslim => {
            let random_num = get_random_number(MUSLIMS.len());
            MUSLIMS[random_num].to_string()
        }
        Source::Other => {
            let random_num = get_random_number(NAMES.len());
            NAMES[random_num].to_string()
        }
    }
}

fn main() {
    let flags = xflags::parse_or_exit! {
        /// Name source
        optional source: String
    };

    let source = match flags.source {
        Some(s) => match s.as_ref() {
            "muslim" => Source::Muslim,
            _ => Source::Other,
        },
        None => Source::Other,
    };
    println!("{:?} ", get_random_name(source));
}
